<!DOCTYPE html>
<html>
<head>
    <meta content="width=device-width" name="viewport">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta charset="utf-8">
    <title>Регистрация</title>
    <link href="favicon.ico" rel="icon">
    <link href="css/style.css" media="screen" rel="stylesheet" title="" type="text/css">
    <link href="css/portable_style.css" media="screen" rel="stylesheet" title="" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700,800&amp;subset=latin,cyrillic" rel="stylesheet">
    <script src='js/jquery-11.0.min.js' type="text/javascript"></script>
    <script src='js/domain.js' type="text/javascript"></script>
</head>
<body>
    <div class="top_nav">
        <div class="container">
            <div class="menu fullsize">
                <ul>
                    <li>
                        <a href="login.html">Войти</a>
                    </li>
                    <li style="list-style: none; display: inline">
                        <div class="arrow"></div>
                    </li>
                    <li>
                        <a href="register.html">Регистрация</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="ddmenu" id="ddm">
        <ul>
            <li>
                <a href="login.html">Войти</a>
            </li>
            <li style="list-style: none; display: inline">
                <div class="arrow"></div>
            </li>
            <li>
                <a href="register.html">Регистрация</a>
            </li>
            <li style="list-style: none; display: inline">
                <hr style="margin-top:10px;margin-bottom:10px;border:0; border-top: #FFF dashed 1px;">
            </li>
        </ul>
    </div>
    <div id="pagewrapper">
        <a href="index.html">
            <div class="skylogo"></div>
        </a>
    </div>
    <div class="mcenter">
        <div class="bodywrapper">
            <br>
            <div class="departments" id="categories">
                <h2 style="text-shadow: 1px 1px 1px Firebrick">Регистрация</h2>
            </div>
            <div id="fullsize_description">
                <form enctype="multipart/form-data" id="aform" method="post" name="mylot">
                    <b>Укажите Email:</b><br>
                    <br>
                    <input id="user_email" name="email" onchange="check_email()" required="" style="width:75%;max-width:450px;" type="text" value=""><br>
                    <div id='ech_error' style="color:red;font-weight:600;display:none">
                        Неправильный адрес email
                    </div><br>
                    <b>Придумайте пароль:</b><br>
                    <br>
                    <input class="pass" id="pass" name="pass" onchange="check_pass()" required="" style="width:75%;max-width:450px;margin-left: 50px;" type="password" value=""> <a href="#?" onclick="showPass()" style="position:relative;right:60px;color:gray;"><small>показать</small></a>
                    <div id='pchv_error' style="color:red;font-weight:600;display:none">
                        Придумайте другой пароль, введенный пароль слишком прост и ненадежен. Также убедитесь, что пароль не содержит логин или email
                    </div>
                    <div id='pch_error' style="color:red;font-weight:600;display:none">
                        Пароль должен иметь длину от 6 символов и состоять из букв и цифр
                    </div><br>
                    <br>
                    <b>Повторите пароль:</b><br>
                    <br>
                    <input class="pass" id='pass2' name="pass2" onchange="check_pass2()" required="" style="width:75%;max-width:450px;margin-left: 50px;" type="password" value=""> <a href="#?" onclick="showPass()" style="position:relative;right:60px;color:gray;"><small>показать</small></a><br>
                    <div id='ppch_error' style="color:red;font-weight:600;display:none">
                        Введенные пароли не совпадают
                    </div><br>
                    <br>
                    <div id="noauth">
                        <input class="green_button" id="submit" style="width:180px" type="submit" value="Отправить"><br>
                    </div><br>
                </form>
            </div>
        </div>
    </div><br>
    <br>
    <br>
    <script type="text/javascript">
        $(function () {
            $('#submit').click(function (e) {
                e.preventDefault();
                var data = {
                    Email: $('#user_email').val(),
                    Password: $('#pass').val(),
                    ConfirmPassword: $('#pass2').val()
                };

                $.ajax({
                    type: 'POST',
                    url: 'http://localhost:49351/api/Account/Register',
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify(data)
                }).success(function (data) {

                    alert("Регистрация пройдена");
                    location.href = 'login.html';

                    }).fail(function (data) {
                        alert($(data)[0].responseJSON.Message);
                });
            });
        })
    </script>
</body>
</html>